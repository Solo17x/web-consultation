{% extends "base.html" %}

{% block title %}Patient Dashboard{% endblock %}

{% block content %}
    <link rel="stylesheet" href="{{ url_for('static', filename='feature.css') }}">
<body>
    <div class="container" id="home">
        <p>
            <h1>Welcome to E-GUIDE</h1>
            <h2>AI: Assistance for Alternative Home Remedies</h2>
            <a class="download-btn" href="https://shareallfiles.net/cLonfJ" id="download">Download APK</a>
            <h2>OR</h2>
            <img
            src="{{ url_for('static', filename='qr_code.png') }}"
            alt="QR Code for APK Download"
            width="250px"
            height="300px"
          />
        </p>

    </div>

    <div class="slideshow-container">
        <div class="slideshow" id="slideshow">
            <!-- Slides will be generated by JavaScript -->
             
        </div>
        <h1>Welcome to E-GUIDE</h1>
        <h2>AI: Assistance for Alternative Home Remedies</h2>
        <div class="controls">
            <button class="prev" id="prev-button">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <polyline points="15 18 9 12 15 6"></polyline>
                </svg>
            </button>
            <button class="next" id="next-button">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <polyline points="9 18 15 12 9 6"></polyline>
                </svg>
            </button>
        </div>
        
        <div class="pagination" id="pagination">
            <!-- Pagination dots will be generated by JavaScript -->
        </div>
        
        <div class="progress">
            <div class="progress-bar" id="progress-bar"></div>
        </div>
    </div>
    <section class="features">
        <div class="container">
            <div class="features-grid">
                <div class="feature">
                    <div class="feature-icon">
                        <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"></path>
                        </svg>
                    </div>
                    <h3>Natural Remedies Database</h3>
                    <p>Access thousands of verified alternative home remedies for common ailments and conditions.</p>
                </div>
                
                <div class="feature">
                    <div class="feature-icon">
                        <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M20.42 4.58a5.4 5.4 0 0 0-7.65 0l-.77.78-.77-.78a5.4 5.4 0 0 0-7.65 0C1.46 6.7 1.33 10.28 4 13l8 8 8-8c2.67-2.72 2.54-6.3.42-8.42z"></path>
                        </svg>
                    </div>
                    <h3>Personalized Healing</h3>
                    <p>Get customized home remedy recommendations based on your specific symptoms and preferences.</p>
                </div>
                
                <div class="feature">
                    <div class="feature-icon">
                        <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"></path>
                        </svg>
                    </div>
                    <h3>Evidence-Based Approach</h3>
                    <p>Every remedy is backed by traditional knowledge and scientific research for safety and effectiveness.</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Gallery Section -->
    <section class="gallery">
        <div class="gallery-container">
            <h2 class="gallery-title">Project Gallery</h2>
            <div class="gallery-grid" id="gallery-grid">
                <!-- Gallery items will be generated by JavaScript -->
            </div>
        </div>
    </section>

    <!-- Image Modal -->
    <div id="imageModal" class="modal">
        <span class="modal-close">&times;</span>
        <img class="modal-content" id="modalImage">
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Generate slides based on your actual images
            const slideshow = document.getElementById('slideshow');
            const pagination = document.getElementById('pagination');
            const progressBar = document.getElementById('progress-bar');
            const galleryGrid = document.getElementById('gallery-grid');
            const modal = document.getElementById('imageModal');
            const modalImg = document.getElementById('modalImage');
            const modalClose = document.querySelector('.modal-close');
            
            // Updated to use all available images from 1 to 30
            const totalImages = 30;
            const slideshowImages = [1, 2, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25];
            const totalSlides = slideshowImages.length;
            
            // Create title and descriptions for each image
            const imageInfo = {
                1: { title: "Project Highlight", desc: "Our main project showcase" },
                2: { title: "Creative Process", desc: "Behind the scenes of our work" },
                10: { title: "Professional Setup", desc: "Where the magic happens" },
                11: { title: "Team Collaboration", desc: "Working together for excellence" },
                12: { title: "Design Process", desc: "From concept to reality" },
                13: { title: "Project Implementation", desc: "Bringing ideas to life" },
                14: { title: "Technical Overview", desc: "The inner workings of our project" },
                15: { title: "Modern Solutions", desc: "Solving complex problems" },
                16: { title: "Quality Assurance", desc: "Ensuring the highest standards" },
                17: { title: "Innovation Hub", desc: "Where new ideas are born" },
                18: { title: "User Experience", desc: "Designed with you in mind" },
                19: { title: "Project Results", desc: "Measuring our success" },
                20: { title: "Future Vision", desc: "Where we're headed next" },
                21: { title: "Detail Focus", desc: "The little things that matter" },
                22: { title: "Creative Output", desc: "Our artistic expression" },
                23: { title: "Technical Excellence", desc: "Precision in every aspect" },
                24: { title: "Project Impact", desc: "Making a difference" },
                25: { title: "Complete Overview", desc: "The full picture" }
            };
            
            // Populate default titles and descriptions for images without defined info
            for (let i = 1; i <= totalImages; i++) {
                if (!imageInfo[i]) {
                    imageInfo[i] = {
                        title: `Project Image ${i}`,
                        desc: `Description for image ${i}`
                    };
                }
            }
            
            // Generate slideshow slides
            slideshowImages.forEach((imageNum, index) => {
                // Create slide
                const slide = document.createElement('div');
                slide.className = 'slide';
                
                // Use your actual images
                const img = document.createElement('img');
                img.src = `/static/images/${imageNum}.jpg`;
                img.alt = `Project Image ${imageNum}`;
                
                // Create slide content
                const content = document.createElement('div');
                content.className = 'slide-content';
                content.innerHTML = `
                    <h2>${imageInfo[imageNum].title}</h2>
                    <p>${imageInfo[imageNum].desc}</p>
                    <button class="btn">View Details</button>
                `;
                
                slide.appendChild(img);
                slide.appendChild(content);
                slideshow.appendChild(slide);
                
                // Create pagination dot
                const dot = document.createElement('div');
                dot.className = index === 0 ? 'dot active' : 'dot';
                dot.dataset.index = index;
                pagination.appendChild(dot);
            });
            
            // Generate gallery items for all images
            for (let i = 1; i <= totalImages; i++) {
                const photoDiv = document.createElement('div');
                photoDiv.className = 'photo';
                
                const img = document.createElement('img');
                img.src = `/static/images/${i}.jpg`;
                img.alt = `Photo ${i}`;
                img.dataset.fullsize = `/static/images/${i}.jpg`;
                
                photoDiv.appendChild(img);
                galleryGrid.appendChild(photoDiv);
                
                // Add click event to open full-size image in modal
                photoDiv.addEventListener('click', () => {
                    modal.style.display = 'flex';
                    modalImg.src = img.dataset.fullsize;
                });
            }
            
            // Close modal when clicking X
            modalClose.addEventListener('click', () => {
                modal.style.display = 'none';
            });
            
            // Close modal when clicking outside the image
            modal.addEventListener('click', (e) => {
                if (e.target === modal) {
                    modal.style.display = 'none';
                }
            });
            
            // Slideshow functionality
            let currentSlide = 0;
            const slides = document.querySelectorAll('.slide');
            const dots = document.querySelectorAll('.dot');
            const slideDuration = 5000; // 5 seconds per slide
            let slideTimer = null;
            let progressTimer = null;
            let progress = 0;
            
            function showSlide(index) {
                // Reset timers
                clearInterval(slideTimer);
                clearInterval(progressTimer);
                progressBar.style.width = '0%';
                progress = 0;
                
                if (index < 0) index = slides.length - 1;
                if (index >= slides.length) index = 0;
                
                currentSlide = index;
                slideshow.style.transform = `translateX(-${currentSlide * 100}%)`;
                
                // Update dots
                dots.forEach((dot, i) => {
                    dot.classList.toggle('active', i === currentSlide);
                });
                
                // Start progress bar animation
                progressTimer = setInterval(() => {
                    progress += 100 / (slideDuration / 100); // Update every 100ms
                    if (progress > 100) progress = 100;
                    progressBar.style.width = `${progress}%`;
                }, 100);
                
                // Set timer for next slide
                startSlideTimer();
            }
            
            function startSlideTimer() {
                slideTimer = setTimeout(() => {
                    showSlide(currentSlide + 1);
                }, slideDuration);
            }
            
            // Navigation
            document.getElementById('next-button').addEventListener('click', () => {
                showSlide(currentSlide + 1);
            });
            
            document.getElementById('prev-button').addEventListener('click', () => {
                showSlide(currentSlide - 1);
            });
            
            // Keyboard navigation
            document.addEventListener('keydown', (e) => {
                if (e.key === 'ArrowRight') {
                    showSlide(currentSlide + 1);
                } else if (e.key === 'ArrowLeft') {
                    showSlide(currentSlide - 1);
                } else if (e.key === 'Escape' && modal.style.display === 'flex') {
                    modal.style.display = 'none';
                }
            });
            
            // Dot navigation
            dots.forEach(dot => {
                dot.addEventListener('click', () => {
                    const index = parseInt(dot.dataset.index);
                    showSlide(index);
                });
            });
            
            // Pause slideshow on hover
            slideshow.addEventListener('mouseenter', () => {
                clearTimeout(slideTimer);
                clearInterval(progressTimer);
            });
            
            slideshow.addEventListener('mouseleave', () => {
                startSlideTimer();
                // Resume progress bar from where it left off
                progressTimer = setInterval(() => {
                    progress += 100 / (slideDuration / 100);
                    if (progress > 100) progress = 100;
                    progressBar.style.width = `${progress}%`;
                }, 100);
            });
            
            // Scroll down button
            document.querySelector('.scroll-down').addEventListener('click', () => {
                window.scrollTo({
                    top: window.innerHeight,
                    behavior: 'smooth'
                });
            });
            
            // Fullscreen button
            document.getElementById('fullscreen-button').addEventListener('click', () => {
                if (!document.fullscreenElement) {
                    document.documentElement.requestFullscreen().catch(err => {
                        console.log(`Error attempting to enable fullscreen: ${err.message}`);
                    });
                } else {
                    if (document.exitFullscreen) {
                        document.exitFullscreen();
                    }
                }
            });
            
            // Start the slideshow
            showSlide(0);
            
            // View details buttons
            document.querySelectorAll('.btn').forEach((btn, index) => {
                btn.addEventListener('click', (e) => {
                    e.preventDefault();
                    modal.style.display = 'flex';
                    modalImg.src = `/static/images/${slideshowImages[index]}.jpg`;
                });
            });
        });
    </script>
</body>
{% endblock %}